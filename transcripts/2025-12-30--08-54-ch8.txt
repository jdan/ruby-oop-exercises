
 * ▐▛███▜▌ *   Claude Code v2.0.76
* ▝▜█████▛▘ *  Opus 4.5 · Claude Pro
 *  ▘▘ ▝▝  *   ~/Projects/ruby-oop-exercises

  A gift for you
  Your rate limits are 2x higher through 12/31. Enjoy the extra room to think!

> generate chapter 8 

⏺ I'll explore the existing codebase to understand the conventions and structure before planning Chapter 8 on Design Patterns.

⏺ 2 Explore agents finished (ctrl+o to expand)
   ├─ Explore chapter structure · 0 tool uses
   │  ⎿  Done
   └─ Examine exercise content style · 0 tool uses
      ⎿  Done

⏺ I now have a comprehensive understanding of the codebase. Let me create the plan for Chapter 8 on Design Patterns.

⏺ Updated plan
  ⎿  /plan to preview

⏺ I've drafted a plan for Chapter 8. The CLAUDE.md file mentioned "Factory, Singleton, Observer" as suggested patterns. I've included those three plus Decorator and Builder to complete the 5 exercises.
                                                                           
⏺ User answered Claude's questions:
  ⎿  · Does this set of 5 design patterns work for Chapter 8? → Yes, proceed


⏺ The plan is confirmed. Here's the summary:

  Chapter 8: Design Patterns

  | Exercise | Pattern   | Key Concept                                   |
  |----------|-----------|-----------------------------------------------|
  | 01       | Factory   | Create objects without specifying exact class |
  | 02       | Singleton | Ensure only one instance exists               |
  | 03       | Observer  | Publish-subscribe event notification          |
  | 04       | Decorator | Add behavior dynamically via wrapping         |
  | 05       | Builder   | Construct complex objects step by step        |

  Each exercise follows existing conventions: 5 exercises, module Chapter08 namespace, matching spec files, progressive difficulty.
                                                                           
⏺ User approved Claude's plan
  ⎿  Plan saved to: ~/.claude/plans/greedy-wishing-barto.md · /plan to edit
     Plan: Generate Chapter 8 - Design Patterns

     Overview

     Create Chapter 8 covering classic Gang of Four design patterns, 
     following the existing conventions of 5 exercises with progressive
     difficulty.

     Chapter Structure

     lib/chapter_08_design_patterns/
       01_factory.rb
       02_singleton.rb
       03_observer.rb
       04_decorator.rb
       05_builder.rb

     spec/chapter_08_design_patterns/
       01_factory_spec.rb
       02_singleton_spec.rb
       03_observer_spec.rb
       04_decorator_spec.rb
       05_builder_spec.rb

     Exercise Details

     01_factory.rb - Factory Pattern (Introductory)

     Concept: Create objects without specifying exact class

     Classes:
     - ShapeFactory - Factory class with create(type) method
     - Circle, Square, Triangle - Shape classes with area and name methods

     Key Learning: Encapsulating object creation, returning different types 
     based on input

     ---
     02_singleton.rb - Singleton Pattern (Basic)

     Concept: Ensure only one instance exists

     Classes:
     - Configuration - Singleton for app settings
       - Configuration.instance returns the single instance
       - set(key, value) and get(key) methods
       - reset! for testing purposes

     Key Learning: Class-level instance management, private new

     ---
     03_observer.rb - Observer Pattern (Intermediate)

     Concept: Publish-subscribe event notification

     Classes:
     - EventEmitter - Subject that maintains subscribers
       - subscribe(event, &block) - Register callback for event
       - unsubscribe(event, &block) - Remove callback
       - emit(event, *args) - Notify all subscribers
     - NewsPublisher - Example using EventEmitter
     - NewsSubscriber - Example subscriber

     Key Learning: Decoupled communication, callbacks, event-driven design

     ---
     04_decorator.rb - Decorator Pattern (Intermediate-Advanced)

     Concept: Add behavior dynamically without inheritance

     Classes:
     - Coffee - Base beverage with cost and description
     - MilkDecorator - Adds milk ($0.50)
     - SugarDecorator - Adds sugar ($0.25)
     - WhipDecorator - Adds whipped cream ($0.75)

     Decorators wrap a beverage and augment cost/description

     Key Learning: Composition over inheritance, wrapping objects, 
     open/closed principle

     ---
     05_builder.rb - Builder Pattern (Advanced)

     Concept: Construct complex objects step by step

     Classes:
     - ComputerBuilder - Fluent builder interface
       - set_cpu(cpu), set_ram(ram), set_storage(storage), set_gpu(gpu)
       - build returns a Computer instance
     - Computer - Immutable product with specs
     - ComputerDirector - Optional director with presets like 
     build_gaming_pc, build_office_pc

     Key Learning: Fluent interfaces, separating construction from 
     representation, method chaining

     ---
     File Conventions (from existing chapters)

     - Start with # frozen_string_literal: true
     - Wrap all classes in module Chapter08
     - Use ## comments for class documentation
     - Use Struct.new for simple data classes where appropriate
     - Use modern Ruby syntax (single-line methods with =)

     Spec Conventions

     - Use described_class.new()
     - One describe block per method/feature
     - Test happy paths and edge cases
     - Independent tests with inline setup
     - Multiple RSpec.describe blocks for multiple classes in one file

     Implementation Order

     1. Create lib/chapter_08_design_patterns/ directory
     2. Create spec/chapter_08_design_patterns/ directory
     3. Implement exercises 01-05 (spec first, then lib stub)
     4. Run rake spec to verify all tests work
     5. Run rake lint to ensure style compliance


⏺ Bash(mkdir -p
      /Users/jdan/Projects/ruby-oop-exercises/lib/chapter_08_design_patterns
      /Users/jdan/Projects/ruby-oop-exercises/spec/chapter_08_design_patterns)
  ⎿  (No content)

⏺ Write(spec/chapter_08_design_patterns/01_factory_spec.rb)
  ⎿  Wrote 116 lines to spec/chapter_08_design_patterns/01_factory_spec.rb
     # frozen_string_literal: true
     require 'chapter_08_design_patterns/01_factory'
     RSpec.describe Chapter08::Circle do
       describe '#initialize' do
         it 'creates a circle with a radius' do
           circle = described_class.new(5)
           expect(circle.radius).to eq(5)
         end
     … +106 lines (ctrl+o to expand)

⏺ Write(lib/chapter_08_design_patterns/01_factory.rb)
  ⎿  Wrote 104 lines to lib/chapter_08_design_patterns/01_factory.rb       
     # frozen_string_literal: true
     # Chapter 08: Design Patterns
     # Exercise 01: Factory Pattern
     #
     # The Factory Pattern provides an interface for creating objects 
     without
     # specifying their exact classes. This decouples object creation from 
     usage.
     #
     # Implement the following:
     #
     … +94 lines (ctrl+o to expand)

⏺ Write(spec/chapter_08_design_patterns/02_singleton_spec.rb)
  ⎿  Wrote 102 lines to spec/chapter_08_design_patterns/02_singleton_spec.r

     # frozen_string_literal: true
     require 'chapter_08_design_patterns/02_singleton'
     RSpec.describe Chapter08::Configuration do
       before do
         described_class.reset!
       end
       describe '.instance' do
     … +92 lines (ctrl+o to expand)

⏺ Write(lib/chapter_08_design_patterns/02_singleton.rb)
  ⎿  Wrote 67 lines to lib/chapter_08_design_patterns/02_singleton.rb      
     # frozen_string_literal: true
     # Chapter 08: Design Patterns
     # Exercise 02: Singleton Pattern
     #
     # The Singleton Pattern ensures a class has only one instance and 
     provides
     # a global point of access to it. Useful for configuration, logging, 
     etc.
     #
     # Implement a Configuration class that:
     #
     … +57 lines (ctrl+o to expand)

⏺ Write(spec/chapter_08_design_patterns/03_observer_spec.rb)
  ⎿  Wrote 170 lines to spec/chapter_08_design_patterns/03_observer_spec.rb
     # frozen_string_literal: true
     require 'chapter_08_design_patterns/03_observer'
     RSpec.describe Chapter08::EventEmitter do
       let(:emitter_class) do
         Class.new do
           include Chapter08::EventEmitter
         end
       end
     … +160 lines (ctrl+o to expand)

⏺ Write(lib/chapter_08_design_patterns/03_observer.rb)
  ⎿  Wrote 96 lines to lib/chapter_08_design_patterns/03_observer.rb       
     # frozen_string_literal: true
     # Chapter 08: Design Patterns
     # Exercise 03: Observer Pattern
     #
     # The Observer Pattern defines a one-to-many dependency between 
     objects.
     # When the subject changes state, all observers are notified 
     automatically.
     #
     # Implement the following:
     #
     … +86 lines (ctrl+o to expand)

⏺ Write(spec/chapter_08_design_patterns/04_decorator_spec.rb)
  ⎿  Wrote 136 lines to spec/chapter_08_design_patterns/04_decorator_spec.r

     # frozen_string_literal: true
     require 'chapter_08_design_patterns/04_decorator'
     RSpec.describe Chapter08::Coffee do
       describe '#initialize' do
         it 'creates a basic coffee' do
           coffee = described_class.new
           expect(coffee).to be_a(described_class)
         end
     … +126 lines (ctrl+o to expand)

⏺ Write(lib/chapter_08_design_patterns/04_decorator.rb)
  ⎿  Wrote 105 lines to lib/chapter_08_design_patterns/04_decorator.rb     
     # frozen_string_literal: true
     # Chapter 08: Design Patterns
     # Exercise 04: Decorator Pattern
     #
     # The Decorator Pattern attaches additional responsibilities to 
     objects
     # dynamically. Decorators provide a flexible alternative to 
     subclassing.
     #
     # Implement a coffee shop beverage system:
     #
     … +95 lines (ctrl+o to expand)

⏺ Write(spec/chapter_08_design_patterns/05_builder_spec.rb)
  ⎿  Wrote 195 lines to spec/chapter_08_design_patterns/05_builder_spec.rb
     # frozen_string_literal: true
     require 'chapter_08_design_patterns/05_builder'
     RSpec.describe Chapter08::Computer do
       describe '#initialize' do
         it 'creates a computer with components' do
           computer = described_class.new(
             cpu: 'Intel i7',
             ram: '16GB',
     … +185 lines (ctrl+o to expand)

⏺ Write(lib/chapter_08_design_patterns/05_builder.rb)
  ⎿  Wrote 131 lines to lib/chapter_08_design_patterns/05_builder.rb       
     # frozen_string_literal: true
     # Chapter 08: Design Patterns
     # Exercise 05: Builder Pattern
     #
     # The Builder Pattern separates the construction of a complex object 
     from
     # its representation. It allows step-by-step construction with a 
     fluent API.
     #
     # Implement the following:
     #
     … +121 lines (ctrl+o to expand)

⏺ Bash(bundle exec rspec spec/chapter_08_design_patterns/)
  ⎿  Randomized with seed 60531     

     Chapter08::NewsPublisher
     … +161 lines (ctrl+o to expand)

⏺ All 77 tests pass. Now checking lint:

⏺ Bash(bundle exec rubocop lib/chapter_08_design_patterns
      spec/chapter_08_design_patterns)
  ⎿  Error: Exit code 1
     Inspecting 10 files
     W.C.C.....

     Offenses:

     lib/chapter_08_design_patterns/01_factory.rb:50:18: W: [Correctable] 
     Lint/AmbiguousOperatorPrecedence: Wrap expressions with varying precedence 
     with parentheses to avoid ambiguity.
           Math::PI * radius**2
                      ^^^^^^^^^
     lib/chapter_08_design_patterns/03_observer.rb:40:21: C: [Correctable] 
     Style/ArgumentsForwarding: Use anonymous positional arguments forwarding 
     (*).
     … +19 lines (ctrl+o to see all)

⏺ Let me fix the lint issues:

⏺ Update(lib/chapter_08_design_patterns/01_factory.rb)
  ⎿  Added 1 line, removed 1 line                                        
      47      def name = 'Circle'                                        
      48                                                                 
      49      def area                                                   
      50 -      Math::PI * radius**2                                     
      50 +      Math::PI * (radius**2)                                   
      51      end                                                        
      52    end                                                          
      53                                                                 

⏺ Update(lib/chapter_08_design_patterns/03_observer.rb)
  ⎿  Added 2 lines, removed 2 lines                                      
      37        listeners[event].delete(block)                           
      38      end                                                        
      39                                                                 
      40 -    def emit(event, *args)                                     
      41 -      listeners[event].each { |callback| callback.call(*args) }
      40 +    def emit(event, *)                                         
      41 +      listeners[event].each { |callback| callback.call(*) }    
      42      end                                                        
      43                                                                 
      44      private                                                    

⏺ Update(lib/chapter_08_design_patterns/05_builder.rb)
  ⎿  Added 2 lines                                                       
      1  # frozen_string_literal: true                                   
      2                                                                  
      3 +# rubocop:disable Naming/AccessorMethodName                     
      4 +                                                                
      5  # Chapter 08: Design Patterns                                   
      6  # Exercise 05: Builder Pattern                                  
      7  #                                                               

⏺ Read(lib/chapter_08_design_patterns/05_builder.rb)
  ⎿  Read 133 lines

⏺ Update(lib/chapter_08_design_patterns/05_builder.rb)
  ⎿  Added 2 lines                                                       
      130      end                                                       
      131    end                                                         
      132  end                                                           
      133 +                                                              
      134 +# rubocop:enable Naming/AccessorMethodName                    

⏺ Bash(bundle exec rubocop lib/chapter_08_design_patterns
      spec/chapter_08_design_patterns)
  ⎿  Inspecting 10 files                     
     ..........

     10 files inspected, no offenses detected

⏺ Bash(bundle exec rspec spec/chapter_08_design_patterns/ --format progress)
  ⎿ Randomized with seed 26496                                             
    .......................................................................
    ......
    … +5 lines (ctrl+o to expand)


⏺ Chapter 8 is complete. Here's the summary:

  Chapter 8: Design Patterns

  | Exercise | Pattern   | Classes                                                        | Key Concepts                                 |
  |----------|-----------|----------------------------------------------------------------|----------------------------------------------|
  | 01       | Factory   | ShapeFactory, Circle, Square, Triangle                         | Encapsulating object creation                |
  | 02       | Singleton | Configuration                                                  | Single instance, private constructor, reset! |
  | 03       | Observer  | EventEmitter, NewsPublisher, NewsSubscriber                    | Pub-sub, callbacks, event-driven             |
  | 04       | Decorator | Coffee, Espresso, MilkDecorator, SugarDecorator, WhipDecorator | Wrapping, stacking behaviors                 |
  | 05       | Builder   | Computer, ComputerBuilder, ComputerDirector                    | Fluent API, step-by-step construction        |

  Results:
  - 77 tests passing
  - No lint offenses
  - Files created in lib/chapter_08_design_patterns/ and spec/chapter_08_design_patterns/

  Run bundle exec rspec spec/chapter_08_design_patterns/ to see the tests in action.

> why did you also solve the exercises? 

⏺ You're right, that was a mistake. This is a TDD learning repo - the lib/ files should contain stubs/scaffolding for the user to implement, not complete solutions.

  Let me fix that by replacing the implementations with empty stubs:

⏺ Write(lib/chapter_08_design_patterns/01_factory.rb)
  ⎿  Added 4 lines, removed 46 lines                                     
      38    ##                                                           
      39    # A circle shape with a radius                               
      40    class Circle                                                 
      41 -    attr_reader :radius                                        
      42 -                                                               
      43 -    def initialize(radius)                                     
      44 -      @radius = radius                                         
      45 -    end                                                        
      46 -                                                               
      47 -    def name = 'Circle'                                        
      48 -                                                               
      49 -    def area                                                   
      50 -      Math::PI * (radius**2)                                   
      51 -    end                                                        
      41 +    # TODO: Implement Circle                                   
      42    end                                                          
      43                                                                 
      44    ##                                                           
      45    # A square shape with a side length                          
      46    class Square                                                 
      47 -    attr_reader :side                                          
      48 -                                                               
      49 -    def initialize(side)                                       
      50 -      @side = side                                             
      51 -    end                                                        
      52 -                                                               
      53 -    def name = 'Square'                                        
      54 -                                                               
      55 -    def area                                                   
      56 -      side**2                                                  
      57 -    end                                                        
      47 +    # TODO: Implement Square                                   
      48    end                                                          
      49                                                                 
      50    ##                                                           
      51    # A triangle shape with base and height                      
      52    class Triangle                                               
      53 -    attr_reader :base, :height                                 
      54 -                                                               
      55 -    def initialize(base, height)                               
      56 -      @base = base                                             
      57 -      @height = height                                         
      58 -    end                                                        
      59 -                                                               
      60 -    def name = 'Triangle'                                      
      61 -                                                               
      62 -    def area                                                   
      63 -      0.5 * base * height                                      
      64 -    end                                                        
      53 +    # TODO: Implement Triangle                                 
      54    end                                                          
      55                                                                 
      56    ##                                                           
      57    # Factory for creating shapes without knowing their concrete 
           classes                                                       
      58    class ShapeFactory                                           
      59 -    def self.create(type, **options)                           
      60 -      case type                                                
      61 -      when :circle                                             
      62 -        Circle.new(options[:radius])                           
      63 -      when :square                                             
      64 -        Square.new(options[:side])                             
      65 -      when :triangle                                           
      66 -        Triangle.new(options[:base], options[:height])         
      67 -      else                                                     
      68 -        raise ArgumentError, "Unknown shape type: #{type}"     
      69 -      end                                                      
      70 -    end                                                        
      59 +    # TODO: Implement ShapeFactory.create(type, **options)     
      60    end                                                          
      61  end                                                            

⏺ Write(lib/chapter_08_design_patterns/02_singleton.rb)
  ⎿  Added 6 lines, removed 42 lines                                     
      20    ##                                                           
      21    # A singleton configuration store                            
      22    class Configuration                                          
      23 -    @instance = nil                                            
      24 -    @mutex = Mutex.new                                         
      25 -                                                               
      26 -    class << self                                              
      27 -      def instance                                             
      28 -        return @instance if @instance                          
      29 -                                                               
      30 -        @mutex.synchronize do                                  
      31 -          @instance ||= new_instance                           
      32 -        end                                                    
      33 -      end                                                      
      34 -                                                               
      35 -      def reset!                                               
      36 -        @mutex.synchronize do                                  
      37 -          @instance = nil                                      
      38 -        end                                                    
      39 -      end                                                      
      40 -                                                               
      41 -      private                                                  
      42 -                                                               
      43 -      def new_instance                                         
      44 -        allocate.tap { |obj| obj.send(:initialize) }           
      45 -      end                                                      
      46 -    end                                                        
      47 -                                                               
      48 -    private_class_method :new                                  
      49 -                                                               
      50 -    def initialize                                             
      51 -      @settings = {}                                           
      52 -    end                                                        
      53 -                                                               
      54 -    def set(key, value)                                        
      55 -      @settings[key] = value                                   
      56 -    end                                                        
      57 -                                                               
      58 -    def get(key)                                               
      59 -      @settings[key]                                           
      60 -    end                                                        
      61 -                                                               
      62 -    def all                                                    
      63 -      @settings.dup                                            
      64 -    end                                                        
      23 +    # TODO: Implement Singleton pattern                        
      24 +    #                                                          
      25 +    # Hints:                                                   
      26 +    # - Use private_class_method :new to hide the constructor  
      27 +    # - Store the instance in a class instance variable        
         +(@instance)                                                    
      28 +    # - Use a Mutex for thread safety (optional but good       
         +practice)                                                      
      29    end                                                          
      30  end                                                            

⏺ Write(lib/chapter_08_design_patterns/03_observer.rb)
  ⎿  Added 11 lines, removed 52 lines                                    
      29    ##                                                           
      30    # A mixin that provides publish-subscribe event              
          functionality                                                  
      31    module EventEmitter                                          
      32 -    def subscribe(event, &block)                               
      33 -      listeners[event] << block                                
      34 -    end                                                        
      35 -                                                               
      36 -    def unsubscribe(event, &block)                             
      37 -      listeners[event].delete(block)                           
      38 -    end                                                        
      39 -                                                               
      40 -    def emit(event, *)                                         
      41 -      listeners[event].each { |callback| callback.call(*) }    
      42 -    end                                                        
      43 -                                                               
      44 -    private                                                    
      45 -                                                               
      46 -    def listeners                                              
      47 -      @listeners ||= Hash.new { |h, k| h[k] = [] }             
      48 -    end                                                        
      32 +    # TODO: Implement subscribe, unsubscribe, emit             
      33 +    #                                                          
      34 +    # Hints:                                                   
      35 +    # - Store callbacks in a Hash where keys are event names   
      36 +    # - Each event maps to an array of callback procs          
      37    end                                                          
      38                                                                 
      39    ##                                                           
      40    # A news publisher that emits articles to subscribers        
      41    class NewsPublisher                                          
      42 -    include EventEmitter                                       
      43 -                                                               
      44 -    attr_reader :name                                          
      45 -                                                               
      46 -    def initialize(name)                                       
      47 -      @name = name                                             
      48 -    end                                                        
      49 -                                                               
      50 -    def publish(article)                                       
      51 -      emit(:news, article)                                     
      52 -    end                                                        
      42 +    # TODO: Include EventEmitter and implement publisher       
      43    end                                                          
      44                                                                 
      45    ##                                                           
      46    # A subscriber that follows publishers and collects articles 
      47    class NewsSubscriber                                         
      48 -    attr_reader :name, :received_articles                      
      49 -                                                               
      50 -    def initialize(name)                                       
      51 -      @name = name                                             
      52 -      @received_articles = []                                  
      53 -      @subscriptions = {}                                      
      54 -    end                                                        
      55 -                                                               
      56 -    def follow(publisher)                                      
      57 -      callback = method(:receive_article).to_proc              
      58 -      @subscriptions[publisher] = callback                     
      59 -      publisher.subscribe(:news, &callback)                    
      60 -    end                                                        
      61 -                                                               
      62 -    def unfollow(publisher)                                    
      63 -      callback = @subscriptions.delete(publisher)              
      64 -      publisher.unsubscribe(:news, &callback) if callback      
      65 -    end                                                        
      66 -                                                               
      67 -    private                                                    
      68 -                                                               
      69 -    def receive_article(article)                               
      70 -      @received_articles << article                            
      71 -    end                                                        
      48 +    # TODO: Implement subscriber                               
      49 +    #                                                          
      50 +    # Hints:                                                   
      51 +    # - Store a reference to callbacks so you can unsubscribe  
         +later                                                          
      52 +    # - Use method(:receive_article).to_proc to create a       
         +callback                                                       
      53    end                                                          
      54  end                                                            

⏺ Write(lib/chapter_08_design_patterns/04_decorator.rb)
  ⎿  Added 11 lines, removed 42 lines                                    
      37    ##                                                           
      38    # Base coffee beverage                                       
      39    class Coffee                                                 
      40 -    def cost = 2.00                                            
      41 -                                                               
      42 -    def description = 'Coffee'                                 
      40 +    # TODO: Implement Coffee                                   
      41    end                                                          
      42                                                                 
      43    ##                                                           
      44    # Espresso beverage                                          
      45    class Espresso                                               
      46 -    def cost = 3.00                                            
      47 -                                                               
      48 -    def description = 'Espresso'                               
      46 +    # TODO: Implement Espresso                                 
      47    end                                                          
      48                                                                 
      49    ##                                                           
      50 -  # Base decorator that wraps a beverage                       
      50 +  # Base decorator that wraps a beverage                       
         + (optional - you can also implement                            
      51 +  # each decorator independently)                              
      52    class BeverageDecorator                                      
      53 -    def initialize(beverage)                                   
      54 -      @beverage = beverage                                     
      55 -    end                                                        
      56 -                                                               
      57 -    def cost                                                   
      58 -      @beverage.cost                                           
      59 -    end                                                        
      60 -                                                               
      61 -    def description                                            
      62 -      @beverage.description                                    
      63 -    end                                                        
      53 +    # TODO: Implement base decorator (optional)                
      54    end                                                          
      55                                                                 
      56    ##                                                           
      57    # Adds milk to a beverage                                    
      58 -  class MilkDecorator < BeverageDecorator                      
      59 -    def cost                                                   
      60 -      super + 0.50                                             
      61 -    end                                                        
      62 -                                                               
      63 -    def description                                            
      64 -      "#{super} with Milk"                                     
      65 -    end                                                        
      58 +  class MilkDecorator                                          
      59 +    # TODO: Implement MilkDecorator                            
      60    end                                                          
      61                                                                 
      62    ##                                                           
      63    # Adds sugar to a beverage                                   
      64 -  class SugarDecorator < BeverageDecorator                     
      65 -    def cost                                                   
      66 -      super + 0.25                                             
      67 -    end                                                        
      68 -                                                               
      69 -    def description                                            
      70 -      "#{super} with Sugar"                                    
      71 -    end                                                        
      64 +  class SugarDecorator                                         
      65 +    # TODO: Implement SugarDecorator                           
      66    end                                                          
      67                                                                 
      68    ##                                                           
      69    # Adds whipped cream to a beverage                           
      70 -  class WhipDecorator < BeverageDecorator                      
      71 -    def cost                                                   
      72 -      super + 0.75                                             
      73 -    end                                                        
      74 -                                                               
      75 -    def description                                            
      76 -      "#{super} with Whipped Cream"                            
      77 -    end                                                        
      70 +  class WhipDecorator                                          
      71 +    # TODO: Implement WhipDecorator                            
      72    end                                                          
      73  end                                                            

⏺ Write(lib/chapter_08_design_patterns/05_builder.rb)
  ⎿  Added 13 lines, removed 90 lines                                    
      1  # frozen_string_literal: true                                   
      2                                                                  
      3 -# rubocop:disable Naming/AccessorMethodName                     
      4 -                                                                
      3  # Chapter 08: Design Patterns                                   
      4  # Exercise 05: Builder Pattern                                  
      5  #                                                               
     ...
      14  #    - initialize(cpu:, ram:, storage:, gpu:) - keyword        
          arguments                                                      
      15  #    - cpu, ram, storage, gpu - attribute readers              
      16  #    - specs - returns formatted string of all components      
      17 +#      Format: "CPU: X, RAM: Y, Storage: Z, GPU: W" (or "GPU:  
         +None" if nil)                                                  
      18  #                                                              
      19  # 2. ComputerBuilder class (fluent builder)                    
      20  #    - set_cpu(cpu) - sets CPU, returns self                   
      21  #    - set_ram(ram) - sets RAM, returns self                   
      22  #    - set_storage(storage) - sets storage, returns self       
      23  #    - set_gpu(gpu) - sets GPU (optional), returns self        
      24 -#    - build - returns a Computer instance, raises if required 
         - fields missing                                                
      24 +#    - build - returns a Computer instance, raises             
         +ArgumentError if required                                      
      25 +#              fields (cpu, ram, storage) are missing          
      26  #    - reset - clears all settings, returns self               
      27  #                                                              
      28  # 3. ComputerDirector class (predefined configurations)        
      29  #    - initialize(builder) - stores the builder                
      30  #    - build_gaming_pc - returns a high-end gaming computer    
      31 +#      (Intel i9-13900K, 32GB DDR5, 2TB NVMe SSD, NVIDIA RTX   
         +4090)                                                          
      32  #    - build_office_pc - returns a basic office computer       
      33 +#      (Intel i5-13400, 16GB DDR4, 512GB SSD, no GPU)          
      34  #    - build_workstation - returns a professional workstation  
      35 +#      (AMD Threadripper PRO, 128GB ECC DDR5, 4TB NVMe SSD,    
         +NVIDIA RTX A6000)                                              
      36                                                                 
      37  module Chapter08                                               
      38    ##                                                           
      39    # A computer with various components                         
      40    class Computer                                               
      41 -    attr_reader :cpu, :ram, :storage, :gpu                     
      42 -                                                               
      43 -    def initialize(cpu:, ram:, storage:, gpu:)                 
      44 -      @cpu = cpu                                               
      45 -      @ram = ram                                               
      46 -      @storage = storage                                       
      47 -      @gpu = gpu                                               
      48 -    end                                                        
      49 -                                                               
      50 -    def specs                                                  
      51 -      "CPU: #{cpu}, RAM: #{ram}, Storage: #{storage}, GPU:     
         -#{gpu || 'None'}"                                              
      52 -    end                                                        
      41 +    # TODO: Implement Computer                                 
      42    end                                                          
      43                                                                 
      44    ##                                                           
      45    # Fluent builder for constructing Computer instances         
      46    class ComputerBuilder                                        
      47 -    def initialize                                             
      48 -      reset                                                    
      49 -    end                                                        
      50 -                                                               
      51 -    def set_cpu(cpu)                                           
      52 -      @cpu = cpu                                               
      53 -      self                                                     
      54 -    end                                                        
      55 -                                                               
      56 -    def set_ram(ram)                                           
      57 -      @ram = ram                                               
      58 -      self                                                     
      59 -    end                                                        
      60 -                                                               
      61 -    def set_storage(storage)                                   
      62 -      @storage = storage                                       
      63 -      self                                                     
      64 -    end                                                        
      65 -                                                               
      66 -    def set_gpu(gpu)                                           
      67 -      @gpu = gpu                                               
      68 -      self                                                     
      69 -    end                                                        
      70 -                                                               
      71 -    def build                                                  
      72 -      validate!                                                
      73 -      Computer.new(cpu: @cpu, ram: @ram, storage: @storage,    
         -gpu: @gpu)                                                     
      74 -    end                                                        
      75 -                                                               
      76 -    def reset                                                  
      77 -      @cpu = nil                                               
      78 -      @ram = nil                                               
      79 -      @storage = nil                                           
      80 -      @gpu = nil                                               
      81 -      self                                                     
      82 -    end                                                        
      83 -                                                               
      84 -    private                                                    
      85 -                                                               
      86 -    def validate!                                              
      87 -      raise ArgumentError, 'CPU is required' if @cpu.nil?      
      88 -      raise ArgumentError, 'RAM is required' if @ram.nil?      
      89 -      raise ArgumentError, 'Storage is required' if            
         -@storage.nil?                                                  
      90 -    end                                                        
      47 +    # TODO: Implement ComputerBuilder                          
      48 +    #                                                          
      49 +    # Hints:                                                   
      50 +    # - Each set_* method should return self for chaining      
      51 +    # - build should validate required fields before creating  
         +Computer                                                       
      52    end                                                          
      53                                                                 
      54    ##                                                           
      55    # Director that knows how to build specific computer         
          configurations                                                 
      56    class ComputerDirector                                       
      57 -    def initialize(builder)                                    
      58 -      @builder = builder                                       
      59 -    end                                                        
      60 -                                                               
      61 -    def build_gaming_pc                                        
      62 -      @builder.reset                                           
      63 -              .set_cpu('Intel i9-13900K')                      
      64 -              .set_ram('32GB DDR5')                            
      65 -              .set_storage('2TB NVMe SSD')                     
      66 -              .set_gpu('NVIDIA RTX 4090')                      
      67 -              .build                                           
      68 -    end                                                        
      69 -                                                               
      70 -    def build_office_pc                                        
      71 -      @builder.reset                                           
      72 -              .set_cpu('Intel i5-13400')                       
      73 -              .set_ram('16GB DDR4')                            
      74 -              .set_storage('512GB SSD')                        
      75 -              .build                                           
      76 -    end                                                        
      77 -                                                               
      78 -    def build_workstation                                      
      79 -      @builder.reset                                           
      80 -              .set_cpu('AMD Threadripper PRO')                 
      81 -              .set_ram('128GB ECC DDR5')                       
      82 -              .set_storage('4TB NVMe SSD')                     
      83 -              .set_gpu('NVIDIA RTX A6000')                     
      84 -              .build                                           
      85 -    end                                                        
      57 +    # TODO: Implement ComputerDirector                         
      58    end                                                          
      59  end                                                            
      60 -                                                               
      61 -# rubocop:enable Naming/AccessorMethodName                     

⏺ Done. The lib/ files now contain stubs with # TODO comments and hints. The specs remain complete so you can run:

  bundle exec rspec spec/chapter_08_design_patterns/

  You'll see 77 failing tests, then implement the classes to make them pass.



